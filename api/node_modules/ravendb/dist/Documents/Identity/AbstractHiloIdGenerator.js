"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const LogUtil_1 = require("../../Utility/LogUtil");
const log = LogUtil_1.getLogger({ module: "HiloIdGenerator" });
class AbstractHiloIdGenerator {
    constructor(store, dbName, tag) {
        this._generators = {};
        this._tag = tag;
        this._store = store;
        this._conventions = store.conventions;
        this._dbName = dbName || store.database;
    }
    returnUnusedRange() {
        const returnPromises = Object.keys(this._generators)
            .map(key => {
            return Promise.resolve()
                .then(() => this._generators[key].returnUnusedRange())
                .catch(err => {
                log.warn(err, "Error returning unused range");
            });
        });
        return Promise.all(returnPromises)
            .then(() => { });
    }
    ;
}
exports.AbstractHiloIdGenerator = AbstractHiloIdGenerator;
